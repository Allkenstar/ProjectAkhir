<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovaPlay</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap Modal -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
            min-height: 100vh;
        }

        .card-hover { transition: transform 0.3s ease; }
        .card-hover:hover { transform: scale(1.05); }

        .nav-gradient {
            background: linear-gradient(to right, #3b82f6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .steam-input {
            background: #1b2838 !important;
            border: 1px solid #3b4450 !important;
            color: #c7d5e0 !important;
            padding: 14px 16px !important;
            font-size: 16px !important;
            border-radius: 6px !important;
        }

        .steam-input:focus {
            background: #0f1926 !important;
            border-color: #67c1f5 !important;
            box-shadow: 0 0 6px #67c1f580 !important;
            color: white !important;
            outline: none !important;
        }

        .modal-content { background: #1b2838 !important; border: 1px solid #2a3f55 !important; }
        .modal-header, .modal-footer { border-color: #2a3f55 !important; }
        .modal-footer { display: block; text-align: center; }

        .login-btn {
            width: 100%;
            padding: 14px 16px;
            background: linear-gradient(to right, #3b82f6, #06b6d4);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 17px;
            transition: 0.2s;
            cursor: pointer;
        }

        .login-btn:hover {
            transform: scale(1.03);
            background: linear-gradient(to right, #2563eb, #0ea5e9);
        }

        .game-card {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .game-card:hover {
            transform: scale(1.05);
        }

        .game-img {
            height: 200px;
            object-fit: cover;
            width: 100%;
        }

        .nav-btn.active {
            background: #3b82f6;
        }
    </style>
</head>

<body class="text-white">

    <!-- Navigation Bar -->
    <nav class="bg-slate-800 bg-opacity-95 border-b border-blue-500 border-opacity-20 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-8">
                    <h1 class="text-2xl font-bold nav-gradient">GameStore</h1>

                    <div class="hidden md:flex space-x-6">
                        <button onclick="showPage('store')" class="nav-btn px-3 py-2 rounded transition text-gray-300 hover:text-white hover:bg-slate-700 bg-blue-600" data-page="store">Store</button>
                        <button onclick="showPage('library')" class="nav-btn px-3 py-2 rounded transition text-gray-300 hover:text-white hover:bg-slate-700" data-page="library">Library</button>
                        <button id="adminNavBtn" onclick="showPage('admin')" class="nav-btn px-3 py-2 rounded transition text-gray-300 hover:text-white hover:bg-slate-700" data-page="admin" style="display:none;">Admin Panel</button>
                    </div>
                </div>

                <div class="flex items-center space-x-4">
                    <div class="relative hidden sm:block">
                        <input type="text" id="searchInput" placeholder="Search games..." onkeyup="filterGames()" class="pl-10 pr-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64">
                    </div>

                    <button onclick="showPage('cart')" class="relative p-2 text-gray-300 hover:text-white hover:bg-slate-700 rounded-lg transition">
                        <span class="text-2xl">ðŸ›’</span>
                        <span id="cartBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center" style="display:none;">0</span>
                    </button>

                    <div id="userSection" class="items-center space-x-3" style="display:none;">
                        <span id="userEmail" class="text-gray-300 hidden sm:block"></span>
                        <button onclick="logout()" class="p-2 text-gray-300 hover:text-white hover:bg-slate-700 rounded-lg transition">Logout</button>
                    </div>

                    <button id="navLoginBtn" onclick="showLogin()" class="p-2 text-gray-300 hover:text-white hover:bg-slate-700 rounded-lg transition">
                        Login
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- LOGIN MODAL -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-white">Sign in to NovaPlay</h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <input id="username" class="steam-input w-full mb-3" placeholder="Username">
                    <input id="password" type="password" class="steam-input w-full" placeholder="Password">

                    <div id="loginMessage" class="text-red-400 mt-3 hidden"></div>
                    
                    <div class="text-gray-400 text-sm mt-3">
                        <p>Demo credentials:</p>
                        <p>Admin: admin / admin</p>
                        <p>User: user / user</p>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="login-btn" onclick="login()">Login</button> 
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Store Page -->
        <div id="storePage" class="page">
            <h2 class="text-3xl font-bold text-white mb-8">Featured Games</h2>
            <div id="gamesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Library Page -->
        <div id="libraryPage" class="page" style="display:none;">
            <h2 class="text-3xl font-bold text-white mb-8">My Library</h2>
            <div id="libraryContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            <div id="emptyLibrary" class="text-center py-20">
                <p class="text-gray-400 text-lg">Your purchased games will appear here</p>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cartPage" class="page" style="display:none;">
            <h2 class="text-3xl font-bold text-white mb-8">Shopping Cart</h2>
            <div id="cartItems"></div>
            <div id="emptyCart" class="text-center py-20">
                <div class="text-6xl mb-4">ðŸ›’</div>
                <p class="text-gray-400 text-lg">Your cart is empty</p>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="adminPage" class="page" style="display:none;">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-white">Admin Panel</h2>
                <button onclick="showAddGameForm()" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center space-x-2">
                    <span>âž•</span>
                    <span>Add Game</span>
                </button>
            </div>

            <div id="gameForm" class="bg-slate-800 rounded-xl p-6 mb-8" style="display:none;">
                <h3 id="formTitle" class="text-xl font-bold text-white mb-4">Add New Game</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-300 mb-2">Title</label>
                        <input type="text" id="gameTitle" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 mb-2">Price</label>
                            <input type="number" id="gamePrice" step="0.01" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-gray-300 mb-2">Genre</label>
                            <input type="text" id="gameGenre" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-300 mb-2">Description</label>
                        <textarea id="gameDescription" rows="3" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>

                    <div>
                        <label class="block text-gray-300 mb-2">Image URL</label>
                        <input type="url" id="gameImage" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <div class="flex space-x-3">
                        <button onclick="saveGame()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition">Save Game</button>
                        <button onclick="cancelGameForm()" class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded-lg transition">Cancel</button>
                    </div>
                </div>
            </div>

            <div id="adminGamesList" class="space-y-4"></div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let games = [];
        let cart = [];
        let library = [];

        // Demo games data (simulating what would come from games.php)
        const demoGames = [
            {
                id: 1,
                title: "Cyberpunk 2077",
                price: 59.99,
                genre: "RPG",
                description: "An open-world action-adventure story set in Night City",
                image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&h=300&fit=crop"
            },
            {
                id: 2,
                title: "The Witcher 3",
                price: 39.99,
                genre: "RPG",
                description: "Play as a professional monster hunter",
                image: "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=400&h=300&fit=crop"
            },
            {
                id: 3,
                title: "Red Dead Redemption 2",
                price: 49.99,
                genre: "Action",
                description: "Experience life in the Wild West",
                image: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400&h=300&fit=crop"
            },
            {
                id: 4,
                title: "Minecraft",
                price: 26.95,
                genre: "Sandbox",
                description: "Build, explore, and survive in blocky worlds",
                image: "https://images.unsplash.com/photo-1560253023-3ec5d502959f?w=400&h=300&fit=crop"
            },
            {
                id: 5,
                title: "Elden Ring",
                price: 59.99,
                genre: "Action RPG",
                description: "Arise, Tarnished, and explore the Lands Between",
                image: "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=400&h=300&fit=crop"
            },
            {
                id: 6,
                title: "GTA V",
                price: 29.99,
                genre: "Action",
                description: "Experience Los Santos in this open-world crime saga",
                image: "https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?w=400&h=300&fit=crop"
            }
        ];

        // Initialize
        $(document).ready(function() {
            games = [...demoGames];
            loadStore();
            
            // Enter key support for login
            $("#username, #password").on("keypress", function(e) {
                if (e.which === 13) {
                    login();
                }
            });
        });

        // SHOW LOGIN MODAL
        function showLogin() {
            let modal = new bootstrap.Modal(document.getElementById("loginModal"));
            modal.show();
            $("#loginMessage").addClass("hidden");
        }

        // LOGIN FUNCTION (SIMULATED - NO PHP REQUIRED)
        function login() {
            let username = $("#username").val().trim();
            let password = $("#password").val().trim();

            // Validate input
            if (!username || !password) {
                $("#loginMessage").text("Please enter username and password").removeClass("hidden");
                return;
            }

            $("#loginMessage").addClass("hidden");

            // Simulate AJAX call with demo users
            const users = [
                { id: 1, name: 'admin', password: 'admin', role: 'admin' },
                { id: 2, name: 'user', password: 'user', role: 'user' }
            ];

            const user = users.find(u => u.name === username && u.password === password);

            if (user) {
                // Success
                currentUser = user;
                
                // Close modal
                let modalElement = document.getElementById("loginModal");
                let modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                }
                
                setTimeout(() => {
                    $('.modal-backdrop').remove();
                    $('body').removeClass('modal-open').css('overflow', '');
                }, 300);
                
                // Update UI
                $("#navLoginBtn").hide();
                $("#userSection").css('display', 'flex');
                $("#userEmail").text(user.name);
                
                // Show admin panel if admin
                if (user.role === 'admin') {
                    $("#adminNavBtn").show();
                }
                
                // Clear form
                $("#username").val("");
                $("#password").val("");
                $("#loginMessage").addClass("hidden");
                
                alert("Welcome, " + user.name + "!");
            } else {
                // Show error
                $("#loginMessage").text("Invalid username or password").removeClass("hidden");
            }
        }

        // LOGOUT
        function logout() {
            currentUser = null;
            $("#userSection").hide();
            $("#navLoginBtn").show();
            $("#adminNavBtn").hide();
            $("#userEmail").text("");
            showPage('store');
            alert("You have been logged out");
        }

        // LOAD STORE
        function loadStore() {
            $("#gamesGrid").empty();
            
            games.forEach(g => {
                $("#gamesGrid").append(`
                    <div class="game-card">
                        <img src="${g.image}" class="game-img" alt="${g.title}">
                        <div class="p-4">
                            <h4 class="text-xl font-bold mb-2">${g.title}</h4>
                            <p class="text-gray-400 text-sm mb-2">${g.genre}</p>
                            <p class="text-sm text-gray-300 mb-3">${g.description}</p>
                            <div class="flex justify-between items-center">
                                <p class="text-blue-400 font-bold text-lg">$${g.price.toFixed(2)}</p>
                                <button onclick="addToCart(${g.id})" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition">
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                `);
            });
        }

        // PAGE NAVIGATION
        function showPage(page) {
            // Hide all pages
            $('.page').hide();
            
            // Remove active class from all nav buttons
            $('.nav-btn').removeClass('active bg-blue-600');
            
            // Show selected page
            $(`#${page}Page`).show();
            
            // Add active class to current button
            $(`.nav-btn[data-page="${page}"]`).addClass('active bg-blue-600');
            
            // Load content based on page
            if (page === 'cart') {
                loadCart();
            } else if (page === 'library') {
                loadLibrary();
            } else if (page === 'admin') {
                if (currentUser && currentUser.role === 'admin') {
                    loadAdminPanel();
                } else {
                    alert('Admin access required');
                    showPage('store');
                }
            }
        }

        // ADD TO CART
        function addToCart(gameId) {
            const game = games.find(g => g.id === gameId);
            if (game && !cart.find(c => c.id === gameId)) {
                cart.push(game);
                updateCartBadge();
                alert(`${game.title} added to cart!`);
            } else if (cart.find(c => c.id === gameId)) {
                alert('Game already in cart');
            }
        }

        // UPDATE CART BADGE
        function updateCartBadge() {
            const badge = $("#cartBadge");
            if (cart.length > 0) {
                badge.text(cart.length).show();
            } else {
                badge.hide();
            }
        }

        // LOAD CART
        function loadCart() {
            const cartItems = $("#cartItems");
            const emptyCart = $("#emptyCart");
            
            if (cart.length === 0) {
                cartItems.hide();
                emptyCart.show();
            } else {
                emptyCart.hide();
                cartItems.show().empty();
                
                let total = 0;
                cart.forEach(game => {
                    total += game.price;
                    cartItems.append(`
                        <div class="bg-slate-800 rounded-lg p-4 mb-4 flex justify-between items-center">
                            <div class="flex items-center space-x-4">
                                <img src="${game.image}" class="w-24 h-24 object-cover rounded" alt="${game.title}">
                                <div>
                                    <h4 class="text-lg font-bold">${game.title}</h4>
                                    <p class="text-gray-400">${game.genre}</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <p class="text-blue-400 font-bold text-xl">$${game.price.toFixed(2)}</p>
                                <button onclick="removeFromCart(${game.id})" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg">
                                    Remove
                                </button>
                            </div>
                        </div>
                    `);
                });
                
                cartItems.append(`
                    <div class="bg-slate-700 rounded-lg p-6 mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xl font-bold">Total:</span>
                            <span class="text-2xl font-bold text-blue-400">$${total.toFixed(2)}</span>
                        </div>
                        <button onclick="checkout()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg text-lg font-bold">
                            Purchase Now
                        </button>
                    </div>
                `);
            }
        }

        // REMOVE FROM CART
        function removeFromCart(gameId) {
            cart = cart.filter(g => g.id !== gameId);
            updateCartBadge();
            loadCart();
        }

        // CHECKOUT
        function checkout() {
            if (!currentUser) {
                alert('Please login to purchase games');
                showLogin();
                return;
            }
            
            library.push(...cart);
            alert(`Purchase successful! ${cart.length} game(s) added to your library.`);
            cart = [];
            updateCartBadge();
            showPage('library');
        }

        // LOAD LIBRARY
        function loadLibrary() {
            const libraryContent = $("#libraryContent");
            const emptyLibrary = $("#emptyLibrary");
            
            if (library.length === 0) {
                libraryContent.hide();
                emptyLibrary.show();
            } else {
                emptyLibrary.hide();
                libraryContent.show().empty();
                
                library.forEach(game => {
                    libraryContent.append(`
                        <div class="game-card">
                            <img src="${game.image}" class="game-img" alt="${game.title}">
                            <div class="p-4">
                                <h4 class="text-xl font-bold mb-2">${game.title}</h4>
                                <p class="text-gray-400 text-sm mb-2">${game.genre}</p>
                                <button class="w-full bg-green-600 hover:bg-green-700 py-2 rounded-lg font-bold">
                                    Play Now
                                </button>
                            </div>
                        </div>
                    `);
                });
            }
        }

        // FILTER GAMES
        function filterGames() {
            const query = $("#searchInput").val().toLowerCase();
            $(".game-card").each(function() {
                const title = $(this).find("h4").text().toLowerCase();
                $(this).toggle(title.includes(query));
            });
        }

        // ADMIN FUNCTIONS
        function loadAdminPanel() {
            const adminList = $("#adminGamesList");
            adminList.empty();
            
            games.forEach(game => {
                adminList.append(`
                    <div class="bg-slate-800 rounded-lg p-4 flex justify-between items-center">
                        <div class="flex items-center space-x-4">
                            <img src="${game.image}" class="w-20 h-20 object-cover rounded" alt="${game.title}">
                            <div>
                                <h4 class="font-bold">${game.title}</h4>
                                <p class="text-gray-400 text-sm">${game.genre} - $${game.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="space-x-2">
                            <button onclick="editGame(${game.id})" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg">
                                Edit
                            </button>
                            <button onclick="deleteGame(${game.id})" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg">
                                Delete
                            </button>
                        </div>
                    </div>
                `);
            });
        }

        function showAddGameForm() {
            $("#gameForm").show();
            $("#formTitle").text("Add New Game");
            clearGameForm();
        }

        function cancelGameForm() {
            $("#gameForm").hide();
            clearGameForm();
        }

        function clearGameForm() {
            $("#gameTitle").val("");
            $("#gamePrice").val("");
            $("#gameGenre").val("");
            $("#gameDescription").val("");
            $("#gameImage").val("");
        }

        function saveGame() {
            const title = $("#gameTitle").val().trim();
            const price = parseFloat($("#gamePrice").val());
            const genre = $("#gameGenre").val().trim();
            const description = $("#gameDescription").val().trim();
            const image = $("#gameImage").val().trim();
            
            if (!title || !price || !genre || !description || !image) {
                alert("Please fill all fields");
                return;
            }
            
            const newGame = {
                id: games.length + 1,
                title, price, genre, description, image
            };
            
            games.push(newGame);
            loadStore();
            loadAdminPanel();
            cancelGameForm();
            alert("Game added successfully!");
        }

        function deleteGame(gameId) {
            if (confirm("Are you sure you want to delete this game?")) {
                games = games.filter(g => g.id !== gameId);
                loadStore();
                loadAdminPanel();
                alert("Game deleted successfully!");
            }
        }

        function editGame(gameId) {
            const game = games.find(g => g.id === gameId);
            if (game) {
                $("#gameTitle").val(game.title);
                $("#gamePrice").val(game.price);
                $("#gameGenre").val(game.genre);
                $("#gameDescription").val(game.description);
                $("#gameImage").val(game.image);
                $("#gameForm").show();
                $("#formTitle").text("Edit Game");
            }
        }
    </script>
</body>
</html>